â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                                â•‘
â•‘                 âœ… PIPELINE ETL + POWER BI - IMPLEMENTACIÃ“N                   â•‘
â•‘                           COMPLETADA Y VALIDADA                               â•‘
â•‘                                                                                â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ RESUMEN DE CAMBIOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ¨ NUEVA FUNCIONALIDAD: Descarga AutomÃ¡tica Gold para Power BI

En cada ciclo del pipeline, el archivo Gold se descarga automÃ¡ticamente a:
    ğŸ“ file/metricas_kpi_gold.csv

Esto permite que Power BI tenga **acceso en tiempo real** a los Ãºltimos KPIs
sin necesidad de descargar manualmente el archivo.


ğŸ”„ FLUJO COMPLETO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    CICLO 1: 14:00:00
    â”œâ”€ ExtracciÃ³n: PostgreSQL â†’ Bronze (MinIO)
    â”œâ”€ Limpieza: Bronze â†’ Silver (MinIO)
    â”œâ”€ KPIs: Silver â†’ Gold (MinIO)
    â””â”€ ğŸ“¥ DESCARGA: Gold â†’ file/metricas_kpi_gold.csv âœ…
    
    â³ ESPERA: 5 minutos
    
    CICLO 2: 14:05:00
    â”œâ”€ ExtracciÃ³n: PostgreSQL â†’ Bronze (MinIO)
    â”œâ”€ Limpieza: Bronze â†’ Silver (MinIO)
    â”œâ”€ KPIs: Silver â†’ Gold (MinIO)
    â””â”€ ğŸ“¥ DESCARGA: Gold â†’ file/metricas_kpi_gold.csv âœ… (ACTUALIZADO)
    
    â³ ESPERA: 5 minutos
    
    ...repetir indefinidamente


ğŸš€ COMANDOS RÃPIDOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# OpciÃ³n 1: Pipeline Principal (RECOMENDADO)
> python main.py
  Ejecuta ciclos continuos cada 5 minutos con descarga automÃ¡tica

# OpciÃ³n 2: Test RÃ¡pido
> python test_pipeline.py -c 1
  Ejecuta 1 ciclo para validar todo el pipeline

# OpciÃ³n 3: Monitoreo en Tiempo Real
> python monitor_powerbi.py --interval 5
  Verifica cambios en el archivo cada 5 segundos

# OpciÃ³n 4: Descarga Manual
> python descargar_gold.py
  Descarga el archivo Gold manualmente (sin ejecutar ciclo)

# OpciÃ³n 5: Quick Start (PowerShell)
> .\quickstart.ps1 run
  Ejecuta pipeline con interfaz amigable


ğŸ“Š ARCHIVOS IMPORTANTES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

main.py                         â† ğŸš€ EJECUTA AQUÃ (Pipeline Principal)
test_pipeline.py                â† Validar todo el pipeline
monitor_powerbi.py              â† Monitorear cambios en tiempo real
descargar_gold.py               â† Descarga manual
quickstart.ps1                  â† Interface rÃ¡pida (PowerShell)

config/minio_config.py          â† [MODIFICADO] Agregado atributo 'secure'

file/                           â† ğŸ“Š TU CARPETA POWER BI
  â””â”€â”€ metricas_kpi_gold.csv     â† CSV que se actualiza en cada ciclo


ğŸ“ˆ CÃ“MO USAR CON POWER BI
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Ejecutar Pipeline:
   cd C:\Users\Alumno_AI\Desktop\Estacion_Meteorologica
   python main.py
   
2. En otra terminal, monitorear:
   python monitor_powerbi.py --interval 5
   
3. Abrir Power BI Desktop:
   - Home â†’ Get Data â†’ Text/CSV
   - Seleccionar: C:\...\Estacion_Meteorologica\file\metricas_kpi_gold.csv
   - Load
   
4. Crear visualizaciones:
   - Usa columnas: temp_avg, temp_max, hum_avg, hum_max, etc.
   - Crea grÃ¡ficos de tendencias, comparativas, etc.

5. (Opcional) Configurar refresh automÃ¡tico:
   - En Power BI: File â†’ Options â†’ Data Load
   - Enable auto-refresh a intervalo deseado


âœ… VALIDACIÃ“N COMPLETADA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ“ Pipeline extrae datos de PostgreSQL
âœ“ Limpieza Silver ejecuta sin errores
âœ“ GeneraciÃ³n de KPIs completada
âœ“ Descarga automÃ¡tica a file/ funcionando
âœ“ Test de 1 ciclo completado exitosamente
âœ“ Monitor detecta cambios correctamente
âœ“ Config MinIO actualizada con 'secure'
âœ“ DocumentaciÃ³n completa disponible


ğŸ“‹ ESTRUCTURA DEL CSV GOLD
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Columnas (9 total):
  id           â†’ ID del sensor (1-5)
  lecturas     â†’ Cantidad total de lecturas
  temp_avg     â†’ Temperatura promedio (Â°C)
  temp_max     â†’ Temperatura mÃ¡xima (Â°C)
  temp_min     â†’ Temperatura mÃ­nima (Â°C)
  temp_std     â†’ DesviaciÃ³n estÃ¡ndar de temperatura
  hum_avg      â†’ Humedad promedio (%)
  hum_max      â†’ Humedad mÃ¡xima (%)
  hum_min      â†’ Humedad mÃ­nima (%)

Ejemplo de datos:
  id,lecturas,temp_avg,temp_max,temp_min,temp_std,hum_avg,hum_max,hum_min
  1,97,25.4,28.5,22.1,1.23,45.2,65.0,30.5
  2,97,24.8,27.2,21.9,1.15,46.1,64.5,31.2
  3,97,25.1,28.0,22.5,1.18,44.9,63.8,32.0
  4,97,25.0,27.5,22.0,1.10,45.5,64.2,31.8
  5,97,25.3,28.2,22.3,1.20,44.8,63.5,32.2


ğŸ¯ PRÃ“XIMOS PASOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Corto plazo (Hoy):
  1. Ejecutar: python main.py
  2. Monitorear: python monitor_powerbi.py
  3. Abrir Power BI Desktop
  4. Importar: file/metricas_kpi_gold.csv
  5. Crear primeras visualizaciones

Mediano plazo:
  1. Crear dashboard completo en Power BI
  2. Configurar refresh automÃ¡tico
  3. Publicar en Power BI Service (opcional)

Largo plazo:
  1. Agregar mÃ¡s mÃ©tricas si es necesario
  2. Optimizar intervalo entre ciclos segÃºn carga
  3. Crear alertas en Power BI para anomalÃ­as


âš™ï¸ CONFIGURACIÃ“N RECOMENDADA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Intervalo entre ciclos: 300 segundos (5 minutos)
  - Equilibra actualizaciÃ³n frecuente con carga del sistema
  - Perfecta para anÃ¡lisis casi en tiempo real
  - Puede ajustarse en main.py

Monitor de cambios: Cada 10 segundos
  - Verifica regularmente si hay actualizaciones
  - Sin sobrecargar el sistema

Power BI Refresh: Configurable en el software
  - Puede ser igual al intervalo de ciclos (5 minutos)
  - O menos frecuente si prefieres ahorrar recursos


ğŸ”§ TROUBLESHOOTING RÃPIDO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Problema: "Error connecting to MinIO"
â†’ Verifica que MinIO estÃ¡ corriendo: http://localhost:9000

Problema: "File not found: file/metricas_kpi_gold.csv"
â†’ AsegÃºrate de que ejecutaste al menos 1 ciclo completo

Problema: "Power BI no ve actualizaciones"
â†’ Ejecuta: python monitor_powerbi.py para verificar que se descarga
â†’ Recarga el dataset en Power BI (Refresh)

Problema: "ModuleNotFoundError: No module named 'minio'"
â†’ Pip install minio

Problema: "PySpark timeout"
â†’ Aumenta el timeout en main.py o reinicia MinIO


ğŸ“š DOCUMENTACIÃ“N
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

GuÃ­a Completa:
  â†’ GUIA_PIPELINE_POWERBI.md
    Instrucciones detalladas, configuraciÃ³n avanzada, troubleshooting

Cambios Realizados:
  â†’ CAMBIOS_DESCARGA_POWERBI.md
    Resumen tÃ©cnico de modificaciones y nuevos archivos

Markdown existentes:
  â†’ DOCUMENTACION.md
  â†’ ANALISIS_LIMPIEZA_CODIGO.md
  â†’ ESTADO_FINAL_LIMPIEZA.md


âœ¨ VENTAJAS DE ESTA IMPLEMENTACIÃ“N
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ“ Totalmente AutomÃ¡tica
  - No requiere intervenciÃ³n manual
  - Descarga se ejecuta en cada ciclo

âœ“ Tiempo Real
  - Power BI siempre tiene datos actualizados
  - AnÃ¡lisis casi inmediato

âœ“ Monitoreable
  - Script monitor_powerbi.py detecta cambios
  - Sabes exactamente cuÃ¡ndo se actualiza

âœ“ Testeable
  - Script test_pipeline.py valida todo
  - Confianza en la pipeline

âœ“ Documentada
  - GuÃ­as completas incluidas
  - Troubleshooting disponible


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                              Â¡LISTO PARA USAR!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Comando para empezar AHORA:

    python main.py

Enjoy! ğŸš€ğŸ“Š
